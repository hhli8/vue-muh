<template>
  <div>
    <p style="text-align: center;padding: 20px 0;font-size: 40px;">this is picker</p>
    <div style="padding: 0 20px;">
      <button @click="show1">选择出生年月日(中文版)</button>
      <button @click="show2">选择出生年月日(英文版)</button>
      <button @click="show3">选择单列</button>
      <button @click="show4">省市区</button>
    </div>
    <muh-popup v-model="dataPicker" :async="true">
      <muh-picker
        ref="datePickerRef"
        :min-year="1970"
        :initValue="initValue"
        :actLine='3'
        lang="zh"
        type="date">
      </muh-picker>
      <button @click="dateOk">确定</button>
    </muh-popup>
    <muh-popup v-model="dataPicker2" :async="true">
      <muh-picker
        ref="datePickerRef2"
        :min-year="1970"
        :actLine='2'
        lang="en"
        type="date">
      </muh-picker>
      <button @click="dateOk2">确定</button>
    </muh-popup>
    <muh-popup v-model="singlePicker" :async="true">
      <div style="background: #BD2C00;color: #fff;text-align: center;font-size: 24px;">
        <span>标题</span>
      </div>
      <muh-picker
        ref="singlePickerRef"
        :columns="columns"
        :set-key="columnsOption"
        :actLine='4'
        :visibleItemCount='6'>
      </muh-picker>
      <button @click="singleOk">确定</button>
    </muh-popup>
    
    <muh-popup v-model="cityPicker" :async="true">
      <muh-picker
        ref="cityPicker"
        :actLine='3'
        :set-key="cityoption"
        :initValue="initCity"
        :columns="cityColumns"
        type="adress">
      </muh-picker>
      <button @click="cityOk">确定</button>
    </muh-popup>
    
    <div v-highlight v-html='htmlEncode(code)'></div>
  </div>
</template>

<script>
import usecode from './use.txt'
import City from './city.js'
export default {
  data () {
    return {
      code: '',
      dataPicker: false,
      dataPicker2: false,
      singlePicker: false,
      cityPicker: false,
      columns: [],
      columnsOption: {
        value: 'name', // 默认value
        code: 'code', // 默认code
        defaultIndex: 2 // 默认0
      },
      initValue: [],
      cityColumns: [],
      cityoption: {
        value: 'name' // 默认value
        /* code: 'code', // 默认code
        children: 'children' */
      },
      initCity: []
    }
  },
  created () {
    this.code = usecode
    setTimeout(() => {
      this.columns = [
        { name: '杭州', code: '1001' },
        { name: '宁波', code: '1002' },
        { name: '金华', code: '1003' },
        { name: '衢州', code: '1004' },
        { name: '丽水', code: '1005' },
        { name: '温州', code: '1006' },
        { name: '舟山', code: '1007' }
      ]
      this.initValue= [1991, 3, 10]
      this.cityColumns = City
      this.initCity = [
        /* {
          name: '上海市',
          code: 1003
        },
        {
          name: '黄浦区6', code: 10036
        },
        {} */
        // { name: '', code: 1006 }
      ]
    }, 30)
    setTimeout(() => {
      //
    }, 30)
    /* this.initCity = [
      {
        name: '上海市',
        code: 1003
      },
      {
        name: '黄浦区6', code: 10036
      },
      {}
    ] */
  },
  methods: {
    show1 () {
      this.dataPicker = true
    },
    show2 () {
      this.dataPicker2 = true
    },
    show3 () {
      this.singlePicker = true
    },
    show4 () {
      this.cityPicker = true
    },
    singleOk () {
      console.log(this.$refs.singlePickerRef.getResult())
    },
    dateOk () {
      this.dataPicker = false
      console.log(this.$refs.datePickerRef.getResult())
    },
    dateOk2 () {
      this.dataPicker2 = false
      console.log(this.$refs.datePickerRef2.getResult())
    },
    cityOk () {
      this.cityPicker = false
      console.log(this.$refs.cityPicker.getResult())
    }
  }
}
</script>

<style lang="scss" scoped="scoped">
button {
  margin-bottom: 15px;
}
</style>
